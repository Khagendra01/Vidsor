2025-11-11 12:43:16 - INFO - ================================================================================
2025-11-11 12:43:16 - INFO - VIDSOR: Orchestrator Query Processing
2025-11-11 12:43:16 - INFO - ================================================================================
2025-11-11 12:43:16 - INFO - Query: find all the highlights of the video.
2025-11-11 12:43:16 - INFO - Log file: logs\agent_find_all_the_highlights_of_the_video__20251111_124316.log
2025-11-11 12:43:16 - INFO - Project: C:\Users\Khage\Desktop\Vidagent\projects\asdf
2025-11-11 12:43:16 - INFO - Video: C:\Users\Khage\Desktop\Vidagent\projects\asdf\video\camp_5min.mp4
2025-11-11 12:43:16 - INFO - Segment tree: C:\Users\Khage\Desktop\Vidagent\projects\asdf\segment_tree.json
2025-11-11 12:43:16 - INFO - Timeline path: C:\Users\Khage\Desktop\Vidagent\projects\asdf\timeline.json
2025-11-11 12:43:16 - INFO - Timeline.json is empty - starting with empty timeline
2025-11-11 12:43:16 - INFO - 
--------------------------------------------------------------------------------
2025-11-11 12:43:16 - INFO - CALLING ORCHESTRATOR
2025-11-11 12:43:16 - INFO - --------------------------------------------------------------------------------
2025-11-11 12:43:16 - INFO - 
================================================================================
2025-11-11 12:43:16 - INFO - ORCHESTRATOR AGENT RUNNER
2025-11-11 12:43:16 - INFO - ================================================================================
2025-11-11 12:43:16 - INFO - Query: find all the highlights of the video.
2025-11-11 12:43:16 - INFO - Timeline: C:\Users\Khage\Desktop\Vidagent\projects\asdf\timeline.json
2025-11-11 12:43:16 - INFO - Segment Tree: C:\Users\Khage\Desktop\Vidagent\projects\asdf\segment_tree.json
2025-11-11 12:43:16 - INFO - Video: C:\Users\Khage\Desktop\Vidagent\projects\asdf\video\camp_5min.mp4
2025-11-11 12:43:16 - INFO - [LOADING] Loading segment tree...
2025-11-11 12:43:16 - INFO -   ✓ Segment tree loaded
2025-11-11 12:43:17 - INFO - 
[EXECUTING] Running orchestrator agent...
2025-11-11 12:43:17 - INFO - 
================================================================================
2025-11-11 12:43:17 - INFO - ORCHESTRATOR AGENT: Timeline Management
2025-11-11 12:43:17 - INFO - ================================================================================
2025-11-11 12:43:17 - INFO - Query: find all the highlights of the video.
2025-11-11 12:43:17 - INFO - Timeline path: C:\Users\Khage\Desktop\Vidagent\projects\asdf\timeline.json
2025-11-11 12:43:17 - INFO - Timeline loaded: 0 chunks, 0.00s duration
2025-11-11 12:43:21 - INFO - 
[OPERATION CLASSIFICATION]
2025-11-11 12:43:21 - INFO -   Operation: FIND_HIGHLIGHTS
2025-11-11 12:43:21 - INFO -   Confidence: 1.00
2025-11-11 12:43:21 - INFO -   Parameters: {'timeline_indices': [], 'insert_position': None, 'insert_before_index': None, 'insert_after_index': None, 'insert_between_indices': [], 'search_query': None, 'temporal_constraint': None, 'temporal_type': None, 'reorder_from_index': None, 'reorder_to_index': None, 'trim_index': None, 'trim_seconds': None, 'trim_from': None}
2025-11-11 12:43:21 - INFO - 
[OPERATION] FIND_HIGHLIGHTS
2025-11-11 12:43:21 - INFO -   Calling planner agent to find highlights...
2025-11-11 12:43:21 - INFO - 
============================================================
2025-11-11 12:43:21 - INFO - PLANNER AGENT: Multi-Modal Search Strategy
2025-11-11 12:43:21 - INFO - ============================================================
2025-11-11 12:43:21 - INFO - Query: find all the highlights of the video.
2025-11-11 12:43:21 - INFO - 
[INSPECTION] Inspecting segment tree to understand video content...
2025-11-11 12:43:21 - INFO -   Found 100 unique keywords
2025-11-11 12:43:21 - INFO -   Found 31 object classes
2025-11-11 12:43:21 - INFO -   Sample keywords: 00, 01, 03, 08, 10, 12345, 15, 19, 1k, 20, 2015, 27, 2d, 2k, 2nd...
2025-11-11 12:43:21 - INFO -   Inspection completed in 0.00s
2025-11-11 12:43:21 - INFO - 
[NARRATION] Creating video narrative understanding...
2025-11-11 12:43:30 - INFO -   Video theme: outdoor adventure with activities involving fishing and scenic views
2025-11-11 12:43:30 - INFO -   Narrative summary: The video captures an outdoor adventure featuring a man on a hillside, activities like fishing, and ...
2025-11-11 12:43:30 - INFO -   Narrative structure:
2025-11-11 12:43:30 - INFO -     INTRO: 360, action, mountains
2025-11-11 12:43:30 - INFO -     BODY: airplane, activities, fishing
2025-11-11 12:43:30 - INFO -     ENDING: fish, boy, rocks
2025-11-11 12:43:30 - INFO -   Highlight keywords: action, amazing, activities
2025-11-11 12:43:30 - INFO -   Narrative creation completed in 8.24s
2025-11-11 12:43:30 - INFO - 
[STEP 1] Generating search queries for all modalities...
2025-11-11 12:43:30 - INFO - [LLM] Calling LLM to generate search queries...
2025-11-11 12:43:34 - INFO - [LLM] Query generation completed in 4.56s
2025-11-11 12:43:34 - DEBUG - [LLM RESPONSE] ```json
{
    "semantic_queries": [
        "find highlights featuring action and amazing activities",
        "show me the exciting moments with fishing and beautiful scenery",
        "highlights of the outdoor adventure with airplanes and fishing"
    ],
    "hierarchical_keywords": [
        "36...
2025-11-11 12:43:34 - INFO - 
[SEARCH PLAN] Generated search queries:
2025-11-11 12:43:34 - INFO -   [INSPECTION] Used segment tree inspection: Yes
2025-11-11 12:43:34 - INFO -   Semantic queries: ['find highlights featuring action and amazing activities', 'show me the exciting moments with fishing and beautiful scenery', 'highlights of the outdoor adventure with airplanes and fishing']
2025-11-11 12:43:34 - INFO -   Hierarchical keywords: ['360', 'action', 'mountains', 'airplane', 'activities', 'fishing', 'fish', 'boy', 'rocks']
2025-11-11 12:43:34 - INFO -   Object classes: ['airplane', 'backpack', 'boat', 'fish']
2025-11-11 12:43:34 - INFO -   Activity: fishing
2025-11-11 12:43:34 - INFO -   Is general highlight query: True
2025-11-11 12:43:34 - INFO - 
[AGENTIC] Phase 1: Semantic Query Analysis...
2025-11-11 12:43:40 - INFO -   Query type: AGGREGATE
2025-11-11 12:43:40 - INFO -   Search intent: semantic
2025-11-11 12:43:40 - INFO -   Target entities: {'objects': [], 'activities': [], 'concepts': []}
2025-11-11 12:43:40 - INFO -   Special handling: {'negation': False, 'temporal': False, 'conditional': False, 'counting': False}
2025-11-11 12:43:40 - INFO -   Reasoning: The query is asking for a collection of highlights from the video, which implies a request for all significant or notable moments without specific conditions or filters. This indicates an aggregate search for all relevant content, hence the query type is AGGREGATE.
2025-11-11 12:43:40 - INFO -   Analysis completed in 5.65s
2025-11-11 12:43:40 - INFO - 
[AGENTIC] Phase 2: Dynamic Strategy Planning...
2025-11-11 12:43:48 - INFO -   Strategy operations: 1
2025-11-11 12:43:48 - INFO -   Post-processing: ['rank_by_relevance']
2025-11-11 12:43:48 - INFO -   Reasoning: The query type is aggregate with no specific target entities, so a hierarchical search is used to explore relevant keywords without the need for other modalities.
2025-11-11 12:43:48 - INFO -   Strategy planning completed in 7.81s
2025-11-11 12:43:48 - INFO - 
[VALIDATION] Cross-validating with search plan...
2025-11-11 12:43:48 - INFO - 
[WEIGHT CONFIGURATION]
2025-11-11 12:43:48 - INFO -   Semantic weight: 0.40
2025-11-11 12:43:48 - INFO -   Activity weight: 0.00
2025-11-11 12:43:48 - INFO -   Hierarchical weight: 0.50
2025-11-11 12:43:48 - INFO -   Threshold: 0.30
2025-11-11 12:43:48 - INFO - 
[STEP 2] Executing search with hierarchical tree + semantic search...
2025-11-11 12:43:48 - INFO - 
  [SEARCH TYPE: General Highlights (Hierarchical Tree)]
2025-11-11 12:43:48 - INFO -       Found 20 highlight candidates
2025-11-11 12:43:48 - INFO - 
  [SEARCH TYPE: Hierarchical Tree (Fast Keyword Lookup)]
2025-11-11 12:43:48 - INFO -     Keyword: '360'
2025-11-11 12:43:48 - INFO -       Found 13 leaf node matches
2025-11-11 12:43:48 - INFO -     Keyword: 'action'
2025-11-11 12:43:48 - INFO -       Found 10 leaf node matches
2025-11-11 12:43:48 - INFO -     Keyword: 'mountains'
2025-11-11 12:43:48 - INFO -       Found 8 leaf node matches
2025-11-11 12:43:48 - INFO -     Keyword: 'airplane'
2025-11-11 12:43:48 - INFO -       Found 9 leaf node matches
2025-11-11 12:43:48 - INFO -     Keyword: 'activities'
2025-11-11 12:43:48 - INFO -       Found 4 leaf node matches
2025-11-11 12:43:48 - INFO -     Keyword: 'fishing'
2025-11-11 12:43:48 - INFO -       Found 20 leaf node matches
2025-11-11 12:43:48 - INFO -     Keyword: 'fish'
2025-11-11 12:43:48 - INFO -       Found 18 leaf node matches
2025-11-11 12:43:48 - INFO -     Keyword: 'boy'
2025-11-11 12:43:48 - INFO -       Found 17 leaf node matches
2025-11-11 12:43:48 - INFO -     Keyword: 'rocks'
2025-11-11 12:43:48 - INFO -       Found 11 leaf node matches
2025-11-11 12:43:48 - INFO - 
  [SEARCH TYPE: Semantic Search (Visual + Audio)]
2025-11-11 12:43:48 - INFO -     Query: 'find highlights featuring action and amazing activities'
2025-11-11 12:43:49 - INFO -       Found 1 matches (took 1.14s)
2025-11-11 12:43:49 - INFO -     Query: 'show me the exciting moments with fishing and beautiful scenery'
2025-11-11 12:43:49 - INFO -       Found 15 matches (took 0.01s)
2025-11-11 12:43:49 - INFO -     Query: 'highlights of the outdoor adventure with airplanes and fishing'
2025-11-11 12:43:49 - INFO -       Found 1 matches (took 0.01s)
2025-11-11 12:43:49 - INFO - 
  [SEARCH TYPE: Object Detection (YOLO)]
2025-11-11 12:43:49 - INFO -     Class: 'backpack'
2025-11-11 12:43:49 - INFO -       Found 88 detections
2025-11-11 12:43:49 - INFO -     Class: 'boat'
2025-11-11 12:43:49 - INFO -       Found 29 detections
2025-11-11 12:43:49 - INFO -     Class: 'fish'
2025-11-11 12:43:49 - INFO -       Found 0 detections
2025-11-11 12:43:49 - INFO -     Class: 'airplane'
2025-11-11 12:43:49 - INFO -       Found 39 detections
2025-11-11 12:43:49 - INFO - 
  [SEARCH TYPE: Activity Pattern Matching]
2025-11-11 12:43:49 - INFO -     Activity: fishing
2025-11-11 12:43:49 - INFO -       Evidence scenes before validation: 7
2025-11-11 12:43:56 - INFO - 
================================================================================
2025-11-11 12:43:56 - INFO - ORCHESTRATOR RESULTS
2025-11-11 12:43:56 - INFO - ================================================================================
2025-11-11 12:43:56 - INFO - Operation: FIND_HIGHLIGHTS
2025-11-11 12:43:56 - ERROR - Status: ✗ Failed
2025-11-11 12:43:56 - ERROR - Error: 'NoneType' object has no attribute 'get'
2025-11-11 12:43:56 - INFO - 
--------------------------------------------------------------------------------
2025-11-11 12:43:56 - INFO - ORCHESTRATOR RESULTS
2025-11-11 12:43:56 - INFO - --------------------------------------------------------------------------------
2025-11-11 12:43:56 - INFO - Operation: FIND_HIGHLIGHTS
2025-11-11 12:43:56 - INFO - Success: False
2025-11-11 12:43:56 - INFO - Timeline chunks after operation: 0
2025-11-11 12:43:56 - INFO - Operation result keys: ['success', 'error', 'chunks_created']
2025-11-11 12:43:56 - INFO -   Chunks created: 0
2025-11-11 12:43:56 - ERROR - Operation failed: 'NoneType' object has no attribute 'get'
2025-11-11 12:43:56 - INFO - Response message: Error: 'NoneType' object has no attribute 'get'...
2025-11-11 12:43:56 - INFO - Skipping timeline UI update (success=False or no timeline_chunks)
2025-11-11 12:43:56 - INFO - 
--------------------------------------------------------------------------------
2025-11-11 12:43:56 - INFO - UPDATING CHAT UI
2025-11-11 12:43:56 - INFO - --------------------------------------------------------------------------------
2025-11-11 12:43:56 - INFO - Chat UI update scheduled
2025-11-11 12:43:56 - INFO - 
================================================================================
2025-11-11 12:43:56 - INFO - QUERY PROCESSING COMPLETED
2025-11-11 12:43:56 - INFO - ================================================================================
2025-11-11 12:43:56 - INFO - Agent thread completed
