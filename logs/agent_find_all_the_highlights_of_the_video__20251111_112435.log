2025-11-11 11:24:35 - INFO - ================================================================================
2025-11-11 11:24:35 - INFO - VIDSOR: Orchestrator Query Processing
2025-11-11 11:24:35 - INFO - ================================================================================
2025-11-11 11:24:35 - INFO - Query: find all the highlights of the video.
2025-11-11 11:24:35 - INFO - Log file: logs\agent_find_all_the_highlights_of_the_video__20251111_112435.log
2025-11-11 11:24:35 - INFO - Project: C:\Users\Khage\Desktop\Vidagent\projects\asdf
2025-11-11 11:24:35 - INFO - Video: C:\Users\Khage\Desktop\Vidagent\projects\asdf\video\camp_5min.mp4
2025-11-11 11:24:35 - INFO - Segment tree: C:\Users\Khage\Desktop\Vidagent\projects\asdf\segment_tree.json
2025-11-11 11:24:35 - INFO - Timeline path: C:\Users\Khage\Desktop\Vidagent\projects\asdf\timeline.json
2025-11-11 11:24:35 - INFO - Timeline.json is empty - starting with empty timeline
2025-11-11 11:24:35 - INFO - 
--------------------------------------------------------------------------------
2025-11-11 11:24:35 - INFO - CALLING ORCHESTRATOR
2025-11-11 11:24:35 - INFO - --------------------------------------------------------------------------------
2025-11-11 11:24:35 - INFO - 
================================================================================
2025-11-11 11:24:35 - INFO - ORCHESTRATOR AGENT RUNNER
2025-11-11 11:24:35 - INFO - ================================================================================
2025-11-11 11:24:35 - INFO - Query: find all the highlights of the video.
2025-11-11 11:24:35 - INFO - Timeline: C:\Users\Khage\Desktop\Vidagent\projects\asdf\timeline.json
2025-11-11 11:24:35 - INFO - Segment Tree: C:\Users\Khage\Desktop\Vidagent\projects\asdf\segment_tree.json
2025-11-11 11:24:35 - INFO - Video: C:\Users\Khage\Desktop\Vidagent\projects\asdf\video\camp_5min.mp4
2025-11-11 11:24:35 - INFO - [LOADING] Loading segment tree...
2025-11-11 11:24:35 - INFO -   ✓ Segment tree loaded
2025-11-11 11:24:36 - INFO - 
[EXECUTING] Running orchestrator agent...
2025-11-11 11:24:36 - INFO - 
================================================================================
2025-11-11 11:24:36 - INFO - ORCHESTRATOR AGENT: Timeline Management
2025-11-11 11:24:36 - INFO - ================================================================================
2025-11-11 11:24:36 - INFO - Query: find all the highlights of the video.
2025-11-11 11:24:36 - INFO - Timeline path: C:\Users\Khage\Desktop\Vidagent\projects\asdf\timeline.json
2025-11-11 11:24:36 - INFO - Timeline loaded: 0 chunks, 0.00s duration
2025-11-11 11:24:42 - INFO - 
[OPERATION CLASSIFICATION]
2025-11-11 11:24:42 - INFO -   Operation: FIND_HIGHLIGHTS
2025-11-11 11:24:42 - INFO -   Confidence: 1.00
2025-11-11 11:24:42 - INFO -   Parameters: {'timeline_indices': [], 'insert_position': None, 'insert_before_index': None, 'insert_after_index': None, 'insert_between_indices': [], 'search_query': 'highlights', 'temporal_constraint': None, 'temporal_type': None, 'reorder_from_index': None, 'reorder_to_index': None, 'trim_index': None, 'trim_seconds': None, 'trim_from': None}
2025-11-11 11:24:42 - INFO - 
[OPERATION] FIND_HIGHLIGHTS
2025-11-11 11:24:42 - INFO -   Calling planner agent to find highlights...
2025-11-11 11:24:42 - INFO - 
============================================================
2025-11-11 11:24:42 - INFO - PLANNER AGENT: Multi-Modal Search Strategy
2025-11-11 11:24:42 - INFO - ============================================================
2025-11-11 11:24:42 - INFO - Query: find all the highlights of the video.
2025-11-11 11:24:42 - INFO - 
[INSPECTION] Inspecting segment tree to understand video content...
2025-11-11 11:24:42 - INFO -   Found 100 unique keywords
2025-11-11 11:24:42 - INFO -   Found 31 object classes
2025-11-11 11:24:42 - INFO -   Sample keywords: 0x000001f7517d9960, 0x000001f7517d9a80, 0x000001f7517d9ae0, 0x000001f7517d9b40, 0x000001f7517d9bd0, 0x000001f7517da710, 0x000001f7517dae30, 0x000001f7517dafe0, 0x000001f7517db250, 0x000001f7517db2b0, 0x000001f7517db340, 0x000001f7517dbdf0, 0x000001f7518a4310, 0x000001f7518a4d00, 10...
2025-11-11 11:24:42 - INFO -   Inspection completed in 0.00s
2025-11-11 11:24:42 - INFO - 
[STEP 1] Generating search queries for all modalities...
2025-11-11 11:24:42 - INFO - [LLM] Calling LLM to generate search queries...
2025-11-11 11:24:50 - INFO - [LLM] Query generation completed in 8.13s
2025-11-11 11:24:50 - DEBUG - [LLM RESPONSE] ```json
{
    "semantic_queries": [
        "airplane flying in the sky",
        "people playing with a baseball bat",
        "dog running in the park",
        "car driving on the road",
        "boat sailing on the water",
        "group of friends sitting on a bench",
        "person using a ce...
2025-11-11 11:24:50 - INFO - 
[SEARCH PLAN] Generated search queries:
2025-11-11 11:24:50 - INFO -   [INSPECTION] Used segment tree inspection: Yes
2025-11-11 11:24:50 - INFO -   Semantic queries: ['airplane flying in the sky', 'people playing with a baseball bat', 'dog running in the park', 'car driving on the road', 'boat sailing on the water', 'group of friends sitting on a bench', 'person using a cell phone', 'children playing with a frisbee', 'family having a picnic with a bowl and bottle', 'cow grazing in the field']
2025-11-11 11:24:51 - INFO -   Hierarchical keywords: ['airplane', 'baseball bat', 'dog', 'car', 'boat', 'bench', 'cell phone', 'frisbee', 'bowl', 'bottle']
2025-11-11 11:24:51 - INFO -   Object classes: ['airplane', 'baseball bat', 'dog', 'car', 'boat', 'bench', 'cell phone', 'frisbee', 'bowl', 'bottle']
2025-11-11 11:24:51 - INFO -   Activity: playing
2025-11-11 11:24:51 - INFO -   Is general highlight query: True
2025-11-11 11:24:51 - INFO - 
[AGENTIC] Phase 1: Semantic Query Analysis...
2025-11-11 11:24:59 - INFO -   Query type: AGGREGATE
2025-11-11 11:24:59 - INFO -   Search intent: semantic
2025-11-11 11:24:59 - INFO -   Target entities: {'objects': [], 'activities': [], 'concepts': []}
2025-11-11 11:24:59 - INFO -   Special handling: {'negation': False, 'temporal': False, 'conditional': False, 'counting': False}
2025-11-11 11:24:59 - INFO -   Reasoning: The query is asking for a collection of highlights from the video, which indicates a desire to aggregate all significant moments without specific conditions or filters. The focus is on retrieving all relevant content, hence the aggregate type. There are no specific objects or activities mentioned, and the request does not imply any negation or temporal constraints.
2025-11-11 11:24:59 - INFO -   Analysis completed in 8.45s
2025-11-11 11:24:59 - INFO - 
[AGENTIC] Phase 2: Dynamic Strategy Planning...
2025-11-11 11:25:07 - INFO -   Strategy operations: 1
2025-11-11 11:25:07 - INFO -   Post-processing: ['rank_by_relevance']
2025-11-11 11:25:07 - INFO -   Reasoning: This strategy focuses solely on hierarchical search as the query does not require object detection, activity detection, or semantic search. The absence of target entities means the search will rely on keyword-based tree lookup to aggregate relevant results.
2025-11-11 11:25:07 - INFO -   Strategy planning completed in 7.64s
2025-11-11 11:25:07 - INFO - 
[VALIDATION] Cross-validating with search plan...
2025-11-11 11:25:07 - INFO - 
[WEIGHT CONFIGURATION]
2025-11-11 11:25:07 - INFO -   Semantic weight: 0.40
2025-11-11 11:25:07 - INFO -   Activity weight: 0.30
2025-11-11 11:25:07 - INFO -   Hierarchical weight: 1.00
2025-11-11 11:25:07 - INFO -   Threshold: 0.30
2025-11-11 11:25:07 - INFO - 
[STEP 2] Executing search with hierarchical tree + semantic search...
2025-11-11 11:25:07 - INFO - 
  [SEARCH TYPE: General Highlights (Hierarchical Tree)]
2025-11-11 11:25:07 - INFO -       Found 20 highlight candidates
2025-11-11 11:25:07 - INFO - 
  [SEARCH TYPE: Hierarchical Tree (Fast Keyword Lookup)]
2025-11-11 11:25:07 - INFO -     Keyword: 'airplane'
2025-11-11 11:25:07 - INFO -       Found 2 leaf node matches
2025-11-11 11:25:07 - INFO -     Keyword: 'baseball bat'
2025-11-11 11:25:07 - INFO -       Found 0 leaf node matches
2025-11-11 11:25:07 - INFO -     Keyword: 'dog'
2025-11-11 11:25:07 - INFO -       Found 5 leaf node matches
2025-11-11 11:25:07 - INFO -     Keyword: 'car'
2025-11-11 11:25:07 - INFO -       Found 3 leaf node matches
2025-11-11 11:25:07 - INFO -     Keyword: 'boat'
2025-11-11 11:25:07 - INFO -       Found 4 leaf node matches
2025-11-11 11:25:07 - INFO -     Keyword: 'bench'
2025-11-11 11:25:07 - INFO -       Found 0 leaf node matches
2025-11-11 11:25:07 - INFO -     Keyword: 'cell phone'
2025-11-11 11:25:07 - INFO -       Found 0 leaf node matches
2025-11-11 11:25:07 - INFO -     Keyword: 'frisbee'
2025-11-11 11:25:07 - INFO -       Found 1 leaf node matches
2025-11-11 11:25:07 - INFO -     Keyword: 'bowl'
2025-11-11 11:25:07 - INFO -       Found 0 leaf node matches
2025-11-11 11:25:07 - INFO -     Keyword: 'bottle'
2025-11-11 11:25:07 - INFO -       Found 3 leaf node matches
2025-11-11 11:25:07 - INFO - 
  [SEARCH TYPE: Semantic Search (Visual + Audio)]
2025-11-11 11:25:07 - INFO -     Query: 'airplane flying in the sky'
2025-11-11 11:25:08 - INFO -       Found 2 matches (took 1.09s)
2025-11-11 11:25:08 - INFO -     Query: 'people playing with a baseball bat'
2025-11-11 11:25:08 - INFO -       Found 0 matches (took 0.02s)
2025-11-11 11:25:08 - INFO -     Query: 'dog running in the park'
2025-11-11 11:25:08 - INFO -       Found 0 matches (took 0.02s)
2025-11-11 11:25:08 - INFO -     Query: 'car driving on the road'
2025-11-11 11:25:08 - INFO -       Found 2 matches (took 0.02s)
2025-11-11 11:25:08 - INFO -     Query: 'boat sailing on the water'
2025-11-11 11:25:08 - INFO -       Found 3 matches (took 0.01s)
2025-11-11 11:25:08 - INFO -     Query: 'group of friends sitting on a bench'
2025-11-11 11:25:08 - INFO -       Found 0 matches (took 0.02s)
2025-11-11 11:25:08 - INFO -     Query: 'person using a cell phone'
2025-11-11 11:25:08 - INFO -       Found 1 matches (took 0.02s)
2025-11-11 11:25:08 - INFO -     Query: 'children playing with a frisbee'
2025-11-11 11:25:08 - INFO -       Found 1 matches (took 0.02s)
2025-11-11 11:25:08 - INFO -     Query: 'family having a picnic with a bowl and bottle'
2025-11-11 11:25:08 - INFO -       Found 1 matches (took 0.02s)
2025-11-11 11:25:08 - INFO -     Query: 'cow grazing in the field'
2025-11-11 11:25:08 - INFO -       Found 0 matches (took 0.02s)
2025-11-11 11:25:08 - INFO - 
  [SEARCH TYPE: Object Detection (YOLO)]
2025-11-11 11:25:08 - INFO -     Class: 'cell phone'
2025-11-11 11:25:08 - INFO -       Found 17 detections
2025-11-11 11:25:08 - INFO -     Class: 'bottle'
2025-11-11 11:25:08 - INFO -       Found 113 detections
2025-11-11 11:25:08 - INFO -     Class: 'bowl'
2025-11-11 11:25:08 - INFO -       Found 261 detections
2025-11-11 11:25:08 - INFO -     Class: 'baseball bat'
2025-11-11 11:25:08 - INFO -       Found 1 detections
2025-11-11 11:25:08 - INFO -     Class: 'airplane'
2025-11-11 11:25:08 - INFO -       Found 39 detections
2025-11-11 11:25:08 - INFO -     Class: 'bench'
2025-11-11 11:25:08 - INFO -       Found 2 detections
2025-11-11 11:25:08 - INFO -     Class: 'car'
2025-11-11 11:25:08 - INFO -       Found 37 detections
2025-11-11 11:25:08 - INFO -     Class: 'frisbee'
2025-11-11 11:25:08 - INFO -       Found 4 detections
2025-11-11 11:25:08 - INFO -     Class: 'dog'
2025-11-11 11:25:08 - INFO -       Found 13 detections
2025-11-11 11:25:08 - INFO -     Class: 'boat'
2025-11-11 11:25:08 - INFO -       Found 29 detections
2025-11-11 11:25:08 - INFO - 
  [SEARCH TYPE: Activity Pattern Matching]
2025-11-11 11:25:08 - INFO -     Activity: playing
2025-11-11 11:25:08 - INFO -       Evidence scenes before validation: 7
2025-11-11 11:25:11 - INFO - 
================================================================================
2025-11-11 11:25:11 - INFO - ORCHESTRATOR RESULTS
2025-11-11 11:25:11 - INFO - ================================================================================
2025-11-11 11:25:11 - INFO - Operation: FIND_HIGHLIGHTS
2025-11-11 11:25:11 - ERROR - Status: ✗ Failed
2025-11-11 11:25:11 - ERROR - Error: 'NoneType' object has no attribute 'get'
2025-11-11 11:25:11 - INFO - 
--------------------------------------------------------------------------------
2025-11-11 11:25:11 - INFO - ORCHESTRATOR RESULTS
2025-11-11 11:25:11 - INFO - --------------------------------------------------------------------------------
2025-11-11 11:25:11 - INFO - Operation: FIND_HIGHLIGHTS
2025-11-11 11:25:11 - INFO - Success: False
2025-11-11 11:25:11 - INFO - Timeline chunks after operation: 0
2025-11-11 11:25:11 - INFO - Operation result keys: ['success', 'error', 'chunks_created']
2025-11-11 11:25:11 - INFO -   Chunks created: 0
2025-11-11 11:25:11 - ERROR - Operation failed: 'NoneType' object has no attribute 'get'
2025-11-11 11:25:11 - INFO - Response message: Error: 'NoneType' object has no attribute 'get'...
2025-11-11 11:25:11 - INFO - Skipping timeline UI update (success=False or no timeline_chunks)
2025-11-11 11:25:11 - INFO - 
--------------------------------------------------------------------------------
2025-11-11 11:25:11 - INFO - UPDATING CHAT UI
2025-11-11 11:25:11 - INFO - --------------------------------------------------------------------------------
2025-11-11 11:25:11 - INFO - Chat UI update scheduled
2025-11-11 11:25:11 - INFO - 
================================================================================
2025-11-11 11:25:11 - INFO - QUERY PROCESSING COMPLETED
2025-11-11 11:25:11 - INFO - ================================================================================
2025-11-11 11:25:11 - INFO - Agent thread completed
