<svg viewBox="0 0 1400 1200" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- Gradients -->
    <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1e1b4b;stop-opacity:1" />
      <stop offset="50%" style="stop-color:#581c87;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1e1b4b;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="cardGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#334155;stop-opacity:0.6" />
      <stop offset="100%" style="stop-color:#1e293b;stop-opacity:0.8" />
    </linearGradient>
    
    <linearGradient id="glowGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#a855f7;stop-opacity:0.8" />
      <stop offset="100%" style="stop-color:#ec4899;stop-opacity:0.8" />
    </linearGradient>
    
    <!-- Filters -->
    <filter id="glow">
      <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    
    <filter id="shadow">
      <feDropShadow dx="0" dy="4" stdDeviation="6" flood-opacity="0.3"/>
    </filter>
    
    <!-- Arrow marker -->
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#a855f7" />
    </marker>
    
    <!-- Animated marker -->
    <marker id="arrowheadAnimated" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#ec4899">
        <animate attributeName="fill" values="#ec4899;#a855f7;#ec4899" dur="2s" repeatCount="indefinite"/>
      </polygon>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="1400" height="1200" fill="url(#bgGradient)"/>
  
  <!-- Animated background particles -->
  <circle cx="200" cy="150" r="3" fill="#a855f7" opacity="0.4">
    <animate attributeName="cy" values="150;120;150" dur="4s" repeatCount="indefinite"/>
    <animate attributeName="opacity" values="0.4;0.8;0.4" dur="4s" repeatCount="indefinite"/>
  </circle>
  <circle cx="1200" cy="300" r="2" fill="#ec4899" opacity="0.3">
    <animate attributeName="cy" values="300;280;300" dur="5s" repeatCount="indefinite"/>
  </circle>
  <circle cx="350" cy="900" r="2.5" fill="#a855f7" opacity="0.5">
    <animate attributeName="cx" values="350;370;350" dur="6s" repeatCount="indefinite"/>
  </circle>
  
  <!-- Title -->
  <text x="700" y="60" font-family="Arial, sans-serif" font-size="42" font-weight="bold" fill="#ffffff" text-anchor="middle">
    Video Extractor Module Architecture
  </text>
  <text x="700" y="90" font-family="Arial, sans-serif" font-size="16" fill="#c4b5fd" text-anchor="middle">
    AI-Powered Video Segment Tree Generation Pipeline
  </text>
  
  <!-- Main Pipeline Box -->
  <g id="pipeline">
    <rect x="500" y="130" width="400" height="80" rx="10" fill="url(#cardGradient)" stroke="#a855f7" stroke-width="2" filter="url(#shadow)"/>
    <text x="700" y="160" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#ffffff" text-anchor="middle">
      Pipeline Orchestrator
    </text>
    <text x="700" y="185" font-family="Arial, sans-serif" font-size="13" fill="#e9d5ff" text-anchor="middle">
      pipeline.py - Loads models &amp; coordinates workflow
    </text>
    
    <!-- Pulsing effect -->
    <rect x="500" y="130" width="400" height="80" rx="10" fill="none" stroke="#ec4899" stroke-width="2" opacity="0.6">
      <animate attributeName="opacity" values="0.6;0;0.6" dur="3s" repeatCount="indefinite"/>
      <animate attributeName="stroke-width" values="2;4;2" dur="3s" repeatCount="indefinite"/>
    </rect>
  </g>
  
  <!-- Models Section -->
  <g id="models">
    <rect x="100" y="280" width="350" height="200" rx="10" fill="url(#cardGradient)" stroke="#a855f7" stroke-width="2" filter="url(#shadow)"/>
    <text x="275" y="310" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">
      Models (models/)
    </text>
    
    <!-- BakLLaVA -->
    <g>
      <rect x="120" y="330" width="310" height="40" rx="5" fill="#334155" stroke="#8b5cf6" stroke-width="1.5"/>
      <circle cx="140" cy="350" r="8" fill="#8b5cf6">
        <animate attributeName="r" values="8;10;8" dur="2s" repeatCount="indefinite"/>
      </circle>
      <text x="160" y="355" font-family="Arial, sans-serif" font-size="14" fill="#ffffff">BakLLaVALoader - Visual descriptions</text>
    </g>
    
    <!-- Whisper -->
    <g>
      <rect x="120" y="380" width="310" height="40" rx="5" fill="#334155" stroke="#8b5cf6" stroke-width="1.5"/>
      <circle cx="140" cy="400" r="8" fill="#8b5cf6">
        <animate attributeName="r" values="8;10;8" dur="2.2s" repeatCount="indefinite"/>
      </circle>
      <text x="160" y="405" font-family="Arial, sans-serif" font-size="14" fill="#ffffff">WhisperLoader - Audio transcription</text>
    </g>
    
    <!-- YOLO -->
    <g>
      <rect x="120" y="430" width="310" height="40" rx="5" fill="#334155" stroke="#8b5cf6" stroke-width="1.5"/>
      <circle cx="140" cy="450" r="8" fill="#8b5cf6">
        <animate attributeName="r" values="8;10;8" dur="2.4s" repeatCount="indefinite"/>
      </circle>
      <text x="160" y="455" font-family="Arial, sans-serif" font-size="14" fill="#ffffff">YOLOLoader - Object detection/tracking</text>
    </g>
  </g>
  
  <!-- Processors Section -->
  <g id="processors">
    <rect x="950" y="280" width="350" height="200" rx="10" fill="url(#cardGradient)" stroke="#a855f7" stroke-width="2" filter="url(#shadow)"/>
    <text x="1125" y="310" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">
      Processors (processors/)
    </text>
    
    <!-- Visual -->
    <g>
      <rect x="970" y="330" width="310" height="40" rx="5" fill="#334155" stroke="#8b5cf6" stroke-width="1.5"/>
      <circle cx="990" cy="350" r="8" fill="#ec4899">
        <animate attributeName="fill" values="#ec4899;#8b5cf6;#ec4899" dur="3s" repeatCount="indefinite"/>
      </circle>
      <text x="1010" y="355" font-family="Arial, sans-serif" font-size="14" fill="#ffffff">VisualProcessor - Frame analysis</text>
    </g>
    
    <!-- Audio -->
    <g>
      <rect x="970" y="380" width="310" height="40" rx="5" fill="#334155" stroke="#8b5cf6" stroke-width="1.5"/>
      <circle cx="990" cy="400" r="8" fill="#ec4899">
        <animate attributeName="fill" values="#ec4899;#8b5cf6;#ec4899" dur="3.2s" repeatCount="indefinite"/>
      </circle>
      <text x="1010" y="405" font-family="Arial, sans-serif" font-size="14" fill="#ffffff">AudioProcessor - Transcription</text>
    </g>
    
    <!-- Tracking -->
    <g>
      <rect x="970" y="430" width="310" height="40" rx="5" fill="#334155" stroke="#8b5cf6" stroke-width="1.5"/>
      <circle cx="990" cy="450" r="8" fill="#ec4899">
        <animate attributeName="fill" values="#ec4899;#8b5cf6;#ec4899" dur="3.4s" repeatCount="indefinite"/>
      </circle>
      <text x="1010" y="455" font-family="Arial, sans-serif" font-size="14" fill="#ffffff">TrackingProcessor - Object groups</text>
    </g>
  </g>
  
  <!-- Segment Tree Generator (Center) -->
  <g id="segmentTree">
    <rect x="450" y="550" width="500" height="100" rx="10" fill="url(#glowGradient)" stroke="#ffffff" stroke-width="2" filter="url(#glow)"/>
    <text x="700" y="585" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#ffffff" text-anchor="middle">
      Segment Tree Generator
    </text>
    <text x="700" y="610" font-family="Arial, sans-serif" font-size="14" fill="#ffffff" text-anchor="middle">
      Core Processing: Second-by-second video analysis
    </text>
    <text x="700" y="630" font-family="Arial, sans-serif" font-size="12" fill="#ffffff" text-anchor="middle">
      Parallel frames (16 workers) • Thread-safe extraction • 1s audio overlap
    </text>
  </g>
  
  <!-- Generators Section -->
  <g id="generators">
    <rect x="200" y="730" width="280" height="180" rx="10" fill="url(#cardGradient)" stroke="#a855f7" stroke-width="2" filter="url(#shadow)"/>
    <text x="340" y="760" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">
      Hierarchical Generator
    </text>
    <text x="340" y="785" font-family="Arial, sans-serif" font-size="12" fill="#e9d5ff" text-anchor="middle">
      generators/hierarchical_generator.py
    </text>
    <rect x="220" y="800" width="240" height="90" rx="5" fill="#1e293b" stroke="#8b5cf6" stroke-width="1"/>
    <text x="340" y="825" font-family="monospace" font-size="11" fill="#4ade80" text-anchor="middle">
      {
    </text>
    <text x="340" y="845" font-family="monospace" font-size="11" fill="#4ade80" text-anchor="middle">
      "branching_factor": 2,
    </text>
    <text x="340" y="865" font-family="monospace" font-size="11" fill="#4ade80" text-anchor="middle">
      "leaf_duration": 5.0
    </text>
    <text x="340" y="885" font-family="monospace" font-size="11" fill="#4ade80" text-anchor="middle">
      }
    </text>
  </g>
  
  <g id="embeddings">
    <rect x="520" y="730" width="280" height="180" rx="10" fill="url(#cardGradient)" stroke="#a855f7" stroke-width="2" filter="url(#shadow)"/>
    <text x="660" y="760" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">
      Embeddings Generator
    </text>
    <text x="660" y="785" font-family="Arial, sans-serif" font-size="12" fill="#e9d5ff" text-anchor="middle">
      generators/embeddings_generator.py
    </text>
    <rect x="540" y="800" width="240" height="90" rx="5" fill="#1e293b" stroke="#8b5cf6" stroke-width="1"/>
    <text x="660" y="825" font-family="monospace" font-size="11" fill="#4ade80" text-anchor="middle">
      {
    </text>
    <text x="660" y="845" font-family="monospace" font-size="11" fill="#4ade80" text-anchor="middle">
      "model": "BAAI/bge-large",
    </text>
    <text x="660" y="865" font-family="monospace" font-size="11" fill="#4ade80" text-anchor="middle">
      "dimension": 1024
    </text>
    <text x="660" y="885" font-family="monospace" font-size="11" fill="#4ade80" text-anchor="middle">
      }
    </text>
  </g>
  
  <g id="output">
    <rect x="840" y="730" width="280" height="180" rx="10" fill="url(#cardGradient)" stroke="#a855f7" stroke-width="2" filter="url(#shadow)"/>
    <text x="980" y="760" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">
      Final JSON Output
    </text>
    <text x="980" y="785" font-family="Arial, sans-serif" font-size="12" fill="#e9d5ff" text-anchor="middle">
      Rich, queryable segment tree
    </text>
    <rect x="860" y="800" width="240" height="90" rx="5" fill="#1e293b" stroke="#8b5cf6" stroke-width="1"/>
    <text x="980" y="825" font-family="monospace" font-size="11" fill="#4ade80" text-anchor="middle">
      • Video metadata
    </text>
    <text x="980" y="845" font-family="monospace" font-size="11" fill="#4ade80" text-anchor="middle">
      • Seconds array
    </text>
    <text x="980" y="865" font-family="monospace" font-size="11" fill="#4ade80" text-anchor="middle">
      • Transcriptions
    </text>
    <text x="980" y="885" font-family="monospace" font-size="11" fill="#4ade80" text-anchor="middle">
      • Tree + Embeddings
    </text>
  </g>
  
  <!-- Animated Connection Lines -->
  <!-- Pipeline to Models -->
  <path d="M 600,210 L 275,280" stroke="#a855f7" stroke-width="2" fill="none" marker-end="url(#arrowheadAnimated)" stroke-dasharray="5,5">
    <animate attributeName="stroke-dashoffset" from="0" to="10" dur="1s" repeatCount="indefinite"/>
  </path>
  
  <!-- Pipeline to Processors -->
  <path d="M 800,210 L 1125,280" stroke="#a855f7" stroke-width="2" fill="none" marker-end="url(#arrowheadAnimated)" stroke-dasharray="5,5">
    <animate attributeName="stroke-dashoffset" from="0" to="10" dur="1s" repeatCount="indefinite"/>
  </path>
  
  <!-- Models to Segment Tree -->
  <path d="M 275,480 L 550,550" stroke="#ec4899" stroke-width="2" fill="none" marker-end="url(#arrowheadAnimated)" stroke-dasharray="5,5">
    <animate attributeName="stroke-dashoffset" from="0" to="10" dur="1.2s" repeatCount="indefinite"/>
  </path>
  
  <!-- Processors to Segment Tree -->
  <path d="M 1125,480 L 850,550" stroke="#ec4899" stroke-width="2" fill="none" marker-end="url(#arrowheadAnimated)" stroke-dasharray="5,5">
    <animate attributeName="stroke-dashoffset" from="0" to="10" dur="1.2s" repeatCount="indefinite"/>
  </path>
  
  <!-- Segment Tree to Hierarchical -->
  <path d="M 600,650 L 340,730" stroke="#a855f7" stroke-width="2" fill="none" marker-end="url(#arrowheadAnimated)" stroke-dasharray="5,5">
    <animate attributeName="stroke-dashoffset" from="0" to="10" dur="1.5s" repeatCount="indefinite"/>
  </path>
  
  <!-- Segment Tree to Embeddings -->
  <path d="M 700,650 L 660,730" stroke="#a855f7" stroke-width="2" fill="none" marker-end="url(#arrowheadAnimated)" stroke-dasharray="5,5">
    <animate attributeName="stroke-dashoffset" from="0" to="10" dur="1.5s" repeatCount="indefinite"/>
  </path>
  
  <!-- Segment Tree to Output -->
  <path d="M 800,650 L 980,730" stroke="#a855f7" stroke-width="2" fill="none" marker-end="url(#arrowheadAnimated)" stroke-dasharray="5,5">
    <animate attributeName="stroke-dashoffset" from="0" to="10" dur="1.5s" repeatCount="indefinite"/>
  </path>
  
  <!-- Data Flow Labels -->
  <g opacity="0.8">
    <text x="400" y="250" font-family="Arial, sans-serif" font-size="11" fill="#c4b5fd" font-style="italic">
      Load models
    </text>
    <text x="920" y="250" font-family="Arial, sans-serif" font-size="11" fill="#c4b5fd" font-style="italic">
      Initialize
    </text>
    <text x="380" y="510" font-family="Arial, sans-serif" font-size="11" fill="#fbbf24" font-style="italic">
      Visual + Audio + Tracking
    </text>
    <text x="880" y="510" font-family="Arial, sans-serif" font-size="11" fill="#fbbf24" font-style="italic">
      Process frames/seconds
    </text>
    <text x="450" y="700" font-family="Arial, sans-serif" font-size="11" fill="#c4b5fd" font-style="italic">
      Generate tree
    </text>
    <text x="640" y="700" font-family="Arial, sans-serif" font-size="11" fill="#c4b5fd" font-style="italic">
      Create vectors
    </text>
    <text x="820" y="700" font-family="Arial, sans-serif" font-size="11" fill="#c4b5fd" font-style="italic">
      Compile JSON
    </text>
  </g>
  
  <!-- Key Features Box -->
  <g id="features">
    <rect x="100" y="960" width="1200" height="180" rx="10" fill="url(#cardGradient)" stroke="#a855f7" stroke-width="2" filter="url(#shadow)"/>
    <text x="700" y="995" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#ffffff" text-anchor="middle">
      Key Features &amp; Capabilities
    </text>
    
    <g transform="translate(150, 1020)">
      <circle cx="0" cy="0" r="6" fill="#8b5cf6">
        <animate attributeName="r" values="6;8;6" dur="2s" repeatCount="indefinite"/>
      </circle>
      <text x="15" y="5" font-family="Arial, sans-serif" font-size="14" fill="#e9d5ff">Parallel Processing (frames + seconds)</text>
    </g>
    
    <g transform="translate(500, 1020)">
      <circle cx="0" cy="0" r="6" fill="#8b5cf6">
        <animate attributeName="r" values="6;8;6" dur="2.2s" repeatCount="indefinite"/>
      </circle>
      <text x="15" y="5" font-family="Arial, sans-serif" font-size="14" fill="#e9d5ff">Thread-safe video extraction</text>
    </g>
    
    <g transform="translate(850, 1020)">
      <circle cx="0" cy="0" r="6" fill="#8b5cf6">
        <animate attributeName="r" values="6;8;6" dur="2.4s" repeatCount="indefinite"/>
      </circle>
      <text x="15" y="5" font-family="Arial, sans-serif" font-size="14" fill="#e9d5ff">Configurable via ExtractorConfig</text>
    </g>
    
    <g transform="translate(150, 1060)">
      <circle cx="0" cy="0" r="6" fill="#ec4899">
        <animate attributeName="r" values="6;8;6" dur="2.6s" repeatCount="indefinite"/>
      </circle>
      <text x="15" y="5" font-family="Arial, sans-serif" font-size="14" fill="#e9d5ff">Modular component architecture</text>
    </g>
    
    <g transform="translate(500, 1060)">
      <circle cx="0" cy="0" r="6" fill="#ec4899">
        <animate attributeName="r" values="6;8;6" dur="2.8s" repeatCount="indefinite"/>
      </circle>
      <text x="15" y="5" font-family="Arial, sans-serif" font-size="14" fill="#e9d5ff">1-second audio overlap mapping</text>
    </g>
    
    <g transform="translate(850, 1060)">
      <circle cx="0" cy="0" r="6" fill="#ec4899">
        <animate attributeName="r" values="6;8;6" dur="3s" repeatCount="indefinite"/>
      </circle>
      <text x="15" y="5" font-family="Arial, sans-serif" font-size="14" fill="#e9d5ff">Semantic search with embeddings</text>
    </g>
    
    <g transform="translate(150, 1100)">
      <circle cx="0" cy="0" r="6" fill="#a855f7">
        <animate attributeName="r" values="6;8;6" dur="3.2s" repeatCount="indefinite"/>
      </circle>
      <text x="15" y="5" font-family="Arial, sans-serif" font-size="14" fill="#e9d5ff">Hierarchical navigation tree</text>
    </g>
    
    <g transform="translate(500, 1100)">
      <circle cx="0" cy="0" r="6" fill="#a855f7">
        <animate attributeName="r" values="6;8;6" dur="3.4s" repeatCount="indefinite"/>
      </circle>
      <text x="15" y="5" font-family="Arial, sans-serif" font-size="14" fill="#e9d5ff">Multi-model AI integration</text>
    </g>
    
    <g transform="translate(850, 1100)">
      <circle cx="0" cy="0" r="6" fill="#a855f7">
        <animate attributeName="r" values="6;8;6" dur="3.6s" repeatCount="indefinite"/>
      </circle>
      <text x="15" y="5" font-family="Arial, sans-serif" font-size="14" fill="#e9d5ff">Rich queryable JSON output</text>
    </g>
  </g>
  
  <!-- Floating data particles -->
  <g opacity="0.3">
    <circle cx="700" cy="400" r="4" fill="#fbbf24">
      <animateMotion path="M 0,0 Q 50,-30 100,0 T 200,0" dur="8s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="8s" repeatCount="indefinite"/>
    </circle>
    <circle cx="700" cy="450" r="3" fill="#4ade80">
      <animateMotion path="M 0,0 Q -40,20 -80,0 T -160,0" dur="10s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="10s" repeatCount="indefinite"/>
    </circle>
    <circle cx="700" cy="500" r="3.5" fill="#60a5fa">
      <animateMotion path="M 0,0 Q 30,40 60,0 T 120,0" dur="9s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.3;0.7;0.3" dur="9s" repeatCount="indefinite"/>
    </circle>
  </g>
</svg>
